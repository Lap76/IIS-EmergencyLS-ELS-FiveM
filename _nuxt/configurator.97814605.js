import{r as j,o as g,c as v,a as e,u as y,F as k,f as z,g as T,D as ge,h as te,i as X,j as N,k as A,v as W,t as M,l as O,m as D,n as P,b as L,d as $,q as B,p as _e,e as ve,_ as he,s as R,x as be,y as G,z as Z,A as le,B as ie}from"./entry.0a0c81a9.js";import{u as ye}from"./state.dfdb71a6.js";import{u as we,a as Se}from"./url.0ae299ed.js";import{u as xe}from"./vue.f36acd1f.8d5d08da.js";const Ee={__name:"importButton",emits:["load"],setup(a,{emit:s}){const r=j(null),d=s,b=m=>{const c=m.target.files[0],w=new FileReader;w.onload=S=>d("load",S.target.result),w.readAsText(c)};return(m,c)=>(g(),v(k,null,[e("button",{class:"blue outlined px-4",type:"button",onClick:c[0]||(c[0]=w=>y(r).click())}," Import Existing VCF "),e("input",{ref_key:"vcf",ref:r,class:"hidden",type:"file",onChange:b},null,544)],64))}},Ce=te(),q=()=>({flashID:1,configuration:{author:null,description:null,version:Ce.public.version,lightables:[],statics:[],useServerSirens:!1,sounds:[{name:"MainHorn",allowUse:!0,audioString:"SIRENS_AIRHORN",soundSet:null},{name:"NineMode",allowUse:!1},{name:"SrnTone1",allowUse:!0,audioString:"VEHICLES_HORNS_SIREN_1",soundSet:"DLC_WMSIRENS_SOUNDSET"},{name:"SrnTone2",allowUse:!0,audioString:"VEHICLES_HORNS_SIREN_2",soundSet:"DLC_WMSIRENS_SOUNDSET"},{name:"SrnTone3",allowUse:!0,audioString:"VEHICLES_HORNS_POLICE_WARNING",soundSet:"DLC_WMSIRENS_SOUNDSET"},{name:"SrnTone4",allowUse:!0,audioString:"VEHICLES_HORNS_AMBULANCE_WARNING",soundSet:"DLC_WMSIRENS_SOUNDSET"}],patterns:[{name:"PRIMARY",isEmergency:!0,flashHighBeam:!1,enableWarningBeep:!1,loopPreview:!0,isPlayingPreview:!1},{name:"SECONDARY",isEmergency:!0,flashHighBeam:!1,enableWarningBeep:!1,loopPreview:!0,isPlayingPreview:!1},{name:"REARREDS",isEmergency:!0,flashHighBeam:!1,enableWarningBeep:!1,loopPreview:!0,isPlayingPreview:!1}],flashes:[]}}),$e=ge,I=()=>ye("vcfConfiguration",()=>Ie()),Ie=()=>localStorage.getItem("vcfConfiguration")!==null&&localStorage.getItem("saveVcfLocal")==="1"?JSON.parse(localStorage.getItem("vcfConfiguration")):q();z(I().value,a=>{localStorage.setItem("vcfUpdate",String($e.now().toUnixInteger())),localStorage.setItem("vcfConfiguration",JSON.stringify(a))});const Ae=()=>{I().value.flashID=q().flashID,I().value.configuration=q().configuration},me=a=>I().value.configuration.flashes.map(r=>r.id).indexOf(a.id),ae=a=>!I().value.configuration.statics.map(s=>s.id).includes(a),ne=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],oe=[1,2,3,4,5,6,7,8,9,10,11,12],H=a=>I().value.configuration.lightables.map(s=>s.id).includes(a),K=T(()=>ne.filter(a=>!H(a))),J=T(()=>oe.filter(a=>!H(a))),Ve=a=>{I().value.configuration.statics.push(a)},Le=a=>{const s=I(),r=s.value.configuration.statics.map(d=>d.id).indexOf(a.id);s.value.configuration.statics.splice(r,1)},ke=a=>{const s=I(),r={id:s.value.flashID++,pattern:a.name,duration:100,extras:[],miscs:[]};s.value.configuration.flashes.push(r)},Me=(a,s)=>{const r=I(),d=me(s);d!==-1&&r.value.configuration.flashes.splice(d,1)},Ne=(a,s,r)=>{const d=I(),b=me(s),m=d.value.configuration.flashes[b].extras,c=d.value.configuration.flashes[b].miscs;typeof r.id=="number"?m.includes(r.id)?m.splice(m.indexOf(r.id),1):m.push(r.id):c.includes(r.id)?c.splice(c.indexOf(r.id),1):typeof r.id=="string"&&c.push(r.id)},Ue=a=>{const s=I();s.value.flashID=a.flashID,s.value.configuration=a.configuration};function Fe(a,s){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12 5.25c1.213 0 2.415.046 3.605.135a3.256 3.256 0 013.01 3.01c.044.583.077 1.17.1 1.759L17.03 8.47a.75.75 0 10-1.06 1.06l3 3a.75.75 0 001.06 0l3-3a.75.75 0 00-1.06-1.06l-1.752 1.751c-.023-.65-.06-1.296-.108-1.939a4.756 4.756 0 00-4.392-4.392 49.422 49.422 0 00-7.436 0A4.756 4.756 0 003.89 8.282c-.017.224-.033.447-.046.672a.75.75 0 101.497.092c.013-.217.028-.434.044-.651a3.256 3.256 0 013.01-3.01c1.19-.09 2.392-.135 3.605-.135zm-6.97 6.22a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.752-1.751c.023.65.06 1.296.108 1.939a4.756 4.756 0 004.392 4.392 49.413 49.413 0 007.436 0 4.756 4.756 0 004.392-4.392c.017-.223.032-.447.046-.672a.75.75 0 00-1.497-.092c-.013.217-.028.434-.044.651a3.256 3.256 0 01-3.01 3.01 47.953 47.953 0 01-7.21 0 3.256 3.256 0 01-3.01-3.01 47.759 47.759 0 01-.1-1.759L6.97 15.53a.75.75 0 001.06-1.06l-3-3z","clip-rule":"evenodd"})])}function Te(a,s){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M15.75 2.25H21a.75.75 0 01.75.75v5.25a.75.75 0 01-1.5 0V4.81L8.03 17.03a.75.75 0 01-1.06-1.06L19.19 3.75h-3.44a.75.75 0 010-1.5zm-10.5 4.5a1.5 1.5 0 00-1.5 1.5v10.5a1.5 1.5 0 001.5 1.5h10.5a1.5 1.5 0 001.5-1.5V10.5a.75.75 0 011.5 0v8.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V8.25a3 3 0 013-3h8.25a.75.75 0 010 1.5H5.25z","clip-rule":"evenodd"})])}function Oe(a,s){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.478 5.559A1.5 1.5 0 016.912 4.5H9A.75.75 0 009 3H6.912a3 3 0 00-2.868 2.118l-2.411 7.838a3 3 0 00-.133.882V18a3 3 0 003 3h15a3 3 0 003-3v-4.162c0-.299-.045-.596-.133-.882l-2.412-7.838A3 3 0 0017.088 3H15a.75.75 0 000 1.5h2.088a1.5 1.5 0 011.434 1.059l2.213 7.191H17.89a3 3 0 00-2.684 1.658l-.256.513a1.5 1.5 0 01-1.342.829h-3.218a1.5 1.5 0 01-1.342-.83l-.256-.512a3 3 0 00-2.684-1.658H3.265l2.213-7.191z","clip-rule":"evenodd"}),e("path",{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 01.75.75v6.44l1.72-1.72a.75.75 0 111.06 1.06l-3 3a.75.75 0 01-1.06 0l-3-3a.75.75 0 011.06-1.06l1.72 1.72V3a.75.75 0 01.75-.75z","clip-rule":"evenodd"})])}function Re(a,s){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M6.912 3a3 3 0 00-2.868 2.118l-2.411 7.838a3 3 0 00-.133.882V18a3 3 0 003 3h15a3 3 0 003-3v-4.162c0-.299-.045-.596-.133-.882l-2.412-7.838A3 3 0 0017.088 3H6.912zm13.823 9.75l-2.213-7.191A1.5 1.5 0 0017.088 4.5H6.912a1.5 1.5 0 00-1.434 1.059L3.265 12.75H6.11a3 3 0 012.684 1.658l.256.513a1.5 1.5 0 001.342.829h3.218a1.5 1.5 0 001.342-.83l.256-.512a3 3 0 012.684-1.658h2.844z","clip-rule":"evenodd"})])}function De(a,s){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z","clip-rule":"evenodd"})])}function Pe(a,s){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M15 6.75a.75.75 0 00-.75.75V18a.75.75 0 00.75.75h.75a.75.75 0 00.75-.75V7.5a.75.75 0 00-.75-.75H15zM20.25 6.75a.75.75 0 00-.75.75V18c0 .414.336.75.75.75H21a.75.75 0 00.75-.75V7.5a.75.75 0 00-.75-.75h-.75zM5.055 7.06C3.805 6.347 2.25 7.25 2.25 8.69v8.122c0 1.44 1.555 2.343 2.805 1.628l7.108-4.061c1.26-.72 1.26-2.536 0-3.256L5.055 7.061z"})])}function Be(a,s){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z","clip-rule":"evenodd"})])}function He(a,s){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"})])}function Y(a,s){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}const je={class:"flex flex-col justify-center h-full"},ze={class:"px-5 pt-3 flex items-center gap-4"},We=e("h2",null,"Lightables",-1),qe=["disabled"],Xe=["disabled"],Ye={class:"p-3 overflow-x-auto"},Ge={class:"table-auto w-full"},Ke=e("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},[e("tr",null,[e("th",null,"Lightable type"),e("th",null,"Lightable ID"),e("th",null,"Allow env light"),e("th",null,"Color"),e("th")])],-1),Je={class:"text-sm divide-y divide-gray-100"},Ze={class:"font-bold"},Qe=["onUpdate:modelValue","onChange"],et=["disabled"],tt=["disabled"],nt=["onUpdate:modelValue"],ot=["value","disabled"],st=["disabled","value"],lt={class:"cb-label"},it=["onUpdate:modelValue"],at={class:"flex items-center gap-4"},rt=["title","onUpdate:modelValue","disabled"],ct=e("option",{value:null},"Choose...",-1),ut=["value"],dt=["onClick"],ft={key:1},ht=e("td",{colspan:"5"},[e("em",null,[$(" You have not configured any lightables. Create one by clicking the ' "),e("strong",null,"New extra"),$(" ' or ' "),e("strong",null,"New misc"),$(" ' button. ")])],-1),mt=[ht],pt=X({__name:"lights",setup(a){const s=["blue","amber","red","green","white"],r=I(),d=c=>r.value.configuration.lightables.splice(c,1),b=(c=null,w=null)=>{if(w==="extra"||(c==null?void 0:c.type)==="extra")return J.value[0]??null;if(w==="misc"||(c==null?void 0:c.type)==="misc")return K.value[0]??null},m=(c="extra")=>{r.value.configuration.lightables.push({type:c,id:b(null,c),enabled:!0,allowEnv:!1,color:null})};return(c,w)=>(g(),v("div",je,[e("header",ze,[We,e("button",{class:"disabled:!bg-gray-300 disabled:!text-gray-500 disabled:!cursor-not-allowed blue",type:"button",onClick:w[0]||(w[0]=S=>m("extra")),disabled:("availableExtraIds"in c?c.availableExtraIds:y(J)).length===0}," New extra ",8,qe),e("button",{class:"disabled:!bg-gray-300 disabled:!text-gray-500 disabled:!cursor-not-allowed blue",type:"button",onClick:w[1]||(w[1]=S=>m("misc")),disabled:("availableMiscIds"in c?c.availableMiscIds:y(K)).length===0}," New misc ",8,Xe)]),e("div",Ye,[e("table",Ge,[Ke,e("tbody",Je,[y(r).configuration.lightables.length?(g(!0),v(k,{key:0},N(y(r).configuration.lightables,(S,h)=>(g(),v("tr",{key:S.id},[e("td",Ze,[A(e("select",{"onUpdate:modelValue":n=>S.type=n,onChange:n=>S.id=b(S)},[e("option",{value:"extra",disabled:("availableExtraIds"in c?c.availableExtraIds:y(J)).length===0}," Extra ",8,et),e("option",{value:"misc",disabled:("availableMiscIds"in c?c.availableMiscIds:y(K)).length===0}," Misc ",8,tt)],40,Qe),[[W,S.type]])]),e("td",null,[A(e("select",{"onUpdate:modelValue":n=>S.id=n},[S.type==="extra"?(g(!0),v(k,{key:0},N("extraIds"in c?c.extraIds:y(oe),n=>(g(),v("option",{key:"extra_"+n,value:n,disabled:("isLightableIdInUse"in c?c.isLightableIdInUse:y(H))(n)},M(n),9,ot))),128)):S.type==="misc"?(g(!0),v(k,{key:1},N("miscIds"in c?c.miscIds:y(ne),n=>(g(),v("option",{key:"misc_"+n,disabled:("isLightableIdInUse"in c?c.isLightableIdInUse:y(H))(n),value:n},M(n),9,st))),128)):O("",!0)],8,nt),[[W,S.id]])]),e("td",null,[e("label",lt,[A(e("input",{"onUpdate:modelValue":n=>S.allowEnv=n,type:"checkbox"},null,8,it),[[D,S.allowEnv]])])]),e("td",at,[e("div",{class:P(["w-8 h-8 px-2 py-1 rounded-md inline-block",S.color])},null,2),A(e("select",{class:P(S.allowEnv?"":"cursor-not-allowed"),title:S.allowEnv?"":"You need to allow env light to change the color","onUpdate:modelValue":n=>S.color=n,disabled:!S.allowEnv},[ct,(g(),v(k,null,N(s,n=>e("option",{key:n,value:n},M(n),9,ut)),64))],10,rt),[[W,S.color]])]),e("td",null,[e("button",{class:"red",type:"button",onClick:n=>d(h)},[L(y(Y),{class:"w-5 h-5"})],8,dt)])]))),128)):(g(),v("tr",ft,mt))])])])]))}}),gt={class:"flex flex-col justify-center h-full"},_t={class:"px-5 pt-3 flex items-center"},vt=e("h2",{class:"mr-4"},"Statics",-1),bt=["disabled"],yt={class:"p-3 overflow-x-auto"},wt={class:"table-auto w-full"},St=e("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},[e("tr",null,[e("th",null,"Lightable type"),e("th",null,"Lightable id"),e("th",null,"Name"),e("th")])],-1),xt={class:"text-sm divide-y divide-gray-100"},Et=["onUpdate:modelValue"],Ct=["disabled"],$t=["disabled"],It=["onUpdate:modelValue"],At=["value","disabled"],Vt=["value","disabled"],Lt=["onUpdate:modelValue"],kt=["onClick"],Mt={key:1},Nt=e("td",{colspan:"3"},[e("em",null,[$(" You have not configured any statics. Create one by clicking the ' "),e("strong",null,"New"),$(" ' button. Please be aware that you need to add 'Lightables' before you can mark them as static. ")])],-1),Ut=[Nt],Ft=X({__name:"statics",setup(a){const s=I(),r=h=>I().value.configuration.statics.map(n=>n.id).includes(h),d=T(()=>oe.filter(h=>H(h))),b=T(()=>ne.filter(h=>H(h))),m=T(()=>b.value.filter(h=>!r(h))),c=T(()=>d.value.filter(h=>!r(h))),w=()=>{Ve({id:null,type:"extra",name:null})},S=h=>{Le(h)};return(h,n)=>(g(),v("div",gt,[e("header",_t,[vt,e("button",{class:"blue",type:"button",onClick:w,disabled:!y(m).length&&!y(c).length}," New ",8,bt)]),e("div",yt,[e("table",wt,[St,e("tbody",xt,[y(s).configuration.statics.length?(g(!0),v(k,{key:0},N(y(s).configuration.statics,(l,f)=>(g(),v("tr",{key:f},[e("td",null,[A(e("select",{"onUpdate:modelValue":u=>l.type=u},[e("option",{value:"extra",disabled:y(c).length===0}," Extra ",8,Ct),e("option",{value:"misc",disabled:y(m).length===0}," Misc ",8,$t)],8,Et),[[W,l.type,void 0,{number:!0}]])]),e("td",null,[A(e("select",{"onUpdate:modelValue":u=>l.id=u},[l.type==="extra"?(g(!0),v(k,{key:0},N(y(d),u=>(g(),v("option",{value:u,key:`extra_${u}`,disabled:r(u)},M(u),9,At))),128)):(g(!0),v(k,{key:1},N(y(b),u=>(g(),v("option",{value:u,key:`misc_${u}`,disabled:r(u)},M(u),9,Vt))),128))],8,It),[[W,l.id,void 0,{number:!0}]])]),e("td",null,[A(e("input",{"onUpdate:modelValue":u=>l.name=u,type:"text"},null,8,Lt),[[B,l.name]])]),e("td",null,[e("button",{type:"button",class:"red",onClick:u=>S(l)}," × ",8,kt)])]))),128)):(g(),v("tr",Mt,Ut))])])])]))}}),Tt={class:"flex flex-col justify-center h-full"},Ot={class:"px-5 pt-3 flex items-center"},Rt=e("h2",{class:"mr-4"},"Sounds",-1),Dt={for:"useServerSirens",class:"cb-label"},Pt={class:"underline flex items-center",href:"https://github.com/Walsheyy/WMServerSirens",target:"_blank"},Bt={class:"p-3 overflow-x-auto"},Ht={class:"table-auto w-full"},jt={class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},zt=e("th",null,"Option",-1),Wt=e("th",null,"Allow use",-1),qt=e("th",null,"Audio string",-1),Xt={key:0},Yt={class:"text-sm divide-y divide-gray-100"},Gt={class:"font-bold"},Kt=["for"],Jt=["id","onUpdate:modelValue"],Zt=["onUpdate:modelValue"],Qt={key:0},en=["onUpdate:modelValue"],tn={__name:"sounds",setup(a){const s=I(),r=["ALPHA","BRAVO","CHARLIE","DELTA","ECHO","FOXTROT","GOLF","HOTEL","INDIA","JULIETT","KILO","LIMA","MIKE","NOVEMBER","OSCAR","PAPA","QUEBEC","ROMEO","SIERRA","TANGO","UNIFORM","VICTOR","WHISKEY","X-RAY","YANKEE","ZULU"];return z(()=>s.value.configuration.useServerSirens,()=>{if(s.value.configuration.useServerSirens){let d=0;s.value.configuration.sounds.forEach(b=>{["MainHorn","NineMode"].includes(b.name)||(b.audioString=`SIREN_${r[d]}`,d++)})}else s.value.configuration.sounds.forEach(d=>{["MainHorn","NineMode"].includes(d.name)||(d.audioString=q().configuration.sounds.find(b=>b.name===d.name).audioString)})}),(d,b)=>(g(),v("div",Tt,[e("header",Ot,[Rt,e("label",Dt,[A(e("input",{class:"mr-2",id:"useServerSirens","onUpdate:modelValue":b[0]||(b[0]=m=>y(s).configuration.useServerSirens=m),type:"checkbox"},null,512),[[D,y(s).configuration.useServerSirens]]),$(" Use  "),e("a",Pt,[$("WMServerSirens "),L(y(Te),{class:"ml-2 w-4 h-auto"})])])]),e("div",Bt,[e("table",Ht,[e("thead",jt,[e("tr",null,[zt,Wt,qt,y(s).configuration.useServerSirens?(g(),v("th",Xt,"Soundset")):O("",!0)])]),e("tbody",Yt,[(g(!0),v(k,null,N(y(s).configuration.sounds,(m,c)=>(g(),v("tr",{key:c},[e("td",Gt,M(m.name),1),e("td",null,[e("label",{for:`allowUse[${c}]`,class:"cb-label"},[A(e("input",{id:`allowUse[${c}]`,"onUpdate:modelValue":w=>m.allowUse=w,type:"checkbox"},null,8,Jt),[[D,m.allowUse]])],8,Kt)]),e("td",null,[m.allowUse&&m.audioString!==void 0?A((g(),v("input",{key:0,"onUpdate:modelValue":w=>m.audioString=w,type:"text"},null,8,Zt)),[[B,m.audioString]]):O("",!0)]),m.allowUse&&y(s).configuration.useServerSirens?(g(),v("td",Qt,[m.soundSet!==void 0?A((g(),v("input",{key:0,"onUpdate:modelValue":w=>m.soundSet=w,type:"text"},null,8,en)),[[B,m.soundSet]]):O("",!0)])):O("",!0)]))),128))])])])]))}},se=a=>(_e("data-v-8d8f2e2b"),a=a(),ve(),a),nn={class:"flex flex-col justify-center h-full"},on=se(()=>e("header",{class:"px-5 pt-3"},[e("h2",null,"Patterns")],-1)),sn={class:"px-5 pt-3 flex items-center gap-4"},ln={class:"font-bold"},an=["onClick"],rn=["for"],cn=["id","onUpdate:modelValue"],un=["for"],dn=["id","onUpdate:modelValue"],fn=["for"],hn=["id","onUpdate:modelValue"],mn={class:"p-3 overflow-x-auto"},pn={class:"table-auto w-full"},gn=se(()=>e("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},[e("tr",null,[e("th",null,"Duration"),e("th",null,"Extras"),e("th",null,"Miscs"),e("th")])],-1)),_n=se(()=>e("td",{class:"pt-4 pb-8 align-top font-semibold text-sm w-32"}," Preview ",-1)),vn={class:"pt-4 pb-8 align-top"},bn=["id"],yn={class:"pt-4 pb-8 align-top"},wn=["id"],Sn={class:"pt-4 pb-8 align-top"},xn={class:"flex gap-4"},En=["onClick"],Cn=["onClick"],$n=["onClick"],In={class:"text-sm divide-y divide-gray-100"},An={class:"w-32"},Vn=["onUpdate:modelValue"],Ln={class:"py-4"},kn=["onClick"],Mn=["onClick"],Nn=["onClick"],Un=X({__name:"patterns",setup(a){const s=I(),r=T(()=>s.value.configuration.lightables.filter(l=>l.enabled&&l.type==="extra"&&ae(l.id))),d=T(()=>s.value.configuration.lightables.filter(l=>l.enabled&&l.type==="misc"&&ae(l.id))),b=l=>{ke(l)},m=(l,f)=>{Me(l,f)},c=async l=>{var u,o;l.isPlayingPreview=!0;const f=n(l);for(const t of f){for(const i of t.extras){const _=r.value.find(p=>p.id===i),E=h(_);document.querySelector(`#${l.name}_extra_${i}`).classList.toggle(E)}for(const i of t.miscs){const _=d.value.find(p=>p.id===i),E=h(_);(u=document.querySelector(`#${l.name}_misc_${i}`))==null||u.classList.toggle(E)}await new Promise(i=>{setTimeout(i,t.duration)});for(const i of t.extras){const _=r.value.find(p=>p.id===i),E=h(_);(o=document.querySelector(`#${l.name}_extra_${i}`))==null||o.classList.toggle(E)}for(const i of t.miscs){const _=d.value.find(p=>p.id===i),E=h(_);document.querySelector(`#${l.name}_misc_${i}`).classList.toggle(E)}}if(l!=null&&l.loopPreview&&(l!=null&&l.isPlayingPreview))return await c(l);l.isPlayingPreview=!1},w=(l,f,u)=>{Ne(l,f,u)},S=(l,f)=>{const u=s.value.configuration.flashes.map(i=>i.id).indexOf(l.id),o=s.value.configuration.flashes[u].extras,t=s.value.configuration.flashes[u].miscs;return Number(f.id)?o.includes(f.id):t.includes(f.id)},h=l=>(l==null?void 0:l.color)??"nocolor",n=l=>s.value.configuration.flashes.filter(f=>f.pattern===l.name);return(l,f)=>(g(),v("div",nn,[on,(g(!0),v(k,null,N(y(s).configuration.patterns,(u,o)=>(g(),v("div",{key:o},[e("header",sn,[e("h3",ln,M(u.name),1),e("button",{class:"blue",type:"button",onClick:t=>b(u)}," Add flash ",8,an),e("label",{for:`isEmergency[${o}]`,class:"cb-label"},[A(e("input",{class:"mr-2",id:`isEmergency[${o}]`,"onUpdate:modelValue":t=>u.isEmergency=t,type:"checkbox"},null,8,cn),[[D,u.isEmergency]]),$(" Is emergency ")],8,rn),e("label",{for:`flashHighBeam[${o}]`,class:"cb-label"},[A(e("input",{class:"mr-2",id:`flashHighBeam[${o}]`,"onUpdate:modelValue":t=>u.flashHighBeam=t,type:"checkbox"},null,8,dn),[[D,u.flashHighBeam]]),$(" Flash high beam ")],8,un),e("label",{for:`enableWarningBeep[${o}]`,class:"cb-label"},[A(e("input",{class:"mr-2",id:`enableWarningBeep[${o}]`,"onUpdate:modelValue":t=>u.enableWarningBeep=t,type:"checkbox"},null,8,hn),[[D,u.enableWarningBeep]]),$(" Enable warning beep ")],8,fn)]),e("div",mn,[e("table",pn,[gn,e("tbody",null,[e("tr",null,[_n,e("td",vn,[(g(!0),v(k,null,N(y(r),(t,i)=>(g(),v("span",{key:i,id:`${u.name}_extra_${t.id}`,class:"light py-4"},M(t==null?void 0:t.id),9,bn))),128))]),e("td",yn,[(g(!0),v(k,null,N(y(d),(t,i)=>(g(),v("span",{key:i,class:"light",id:`${u.name}_misc_${t.id}`},M(t.id),9,wn))),128))]),e("td",Sn,[e("div",xn,[u.isPlayingPreview?(g(),v("button",{key:1,type:"button",class:"amber",onClick:t=>{u.loopPreview=!1,u.isPlayingPreview=!1}},[L(y(Pe),{class:"w-4 h-4"})],8,Cn)):(g(),v("button",{key:0,type:"button",class:"green",onClick:t=>c(u)},[L(y(Be),{class:"w-4 h-4"})],8,En)),e("button",{type:"button",class:P(u.loopPreview?"blue border-[1px]":"blue outlined"),onClick:t=>u.loopPreview=!u.loopPreview},[L(y(Fe),{class:"w-4 h-4"})],10,$n)])])])]),e("tbody",In,[(g(!0),v(k,null,N(n(u),(t,i)=>(g(),v("tr",{key:i},[e("td",An,[A(e("input",{"onUpdate:modelValue":_=>t.duration=_,type:"number",min:"0"},null,8,Vn),[[B,t.duration,void 0,{number:!0}]])]),e("td",Ln,[(g(!0),v(k,null,N(y(r),(_,E)=>(g(),v("span",{key:E,class:P(["light",S(t,_)?h(_):""]),onClick:p=>w(u,t,_)},M(_.id),11,kn))),128))]),e("td",null,[(g(!0),v(k,null,N(y(d),(_,E)=>(g(),v("span",{key:E,class:P(["light",S(t,_)?h(_):""]),onClick:p=>w(u,t,_)},M(_.id),11,Mn))),128))]),e("td",null,[e("button",{type:"button",class:"red",onClick:_=>m(u,t)},[L(y(Y),{class:"w-4 h-4"})],8,Nn)])]))),128))])])])]))),128))]))}});const Fn=he(Un,[["__scopeId","data-v-8d8f2e2b"]]),Tn=a=>{var h;const s=(h=te().public)==null?void 0:h.version,r=document.implementation.createDocument("","",null);[r.createComment(" THIS FILE WAS GENERATED BY THE MISS ELS VCF CONFIGURATOR "),r.createComment(" ELS VEHICLE CONFIGURATION FILE "),r.createComment("IF YOU DON'T KNOW WHAT YOU ARE DOING, READ THE DOCS: https://github.com/matsn0w/MISS-ELS/blob/main/docs/vcf.md")].forEach(n=>r.appendChild(n));const b=r.createElement("vcfroot");b.setAttribute("Description",a.description??""),b.setAttribute("Author",a.author??""),b.setAttribute("Version",s??""),r.appendChild(b);const m=r.createElement("EOVERRIDE");a.lightables.filter(n=>n.type==="extra").forEach(n=>{let l=`${n.id}`;l=l.replace(/(^[^\d\n]*\d[^\d\n]*$)/gm,"0$1");const f=r.createElement(`Extra${l}`);n.allowEnv&&(f.setAttribute("AllowEnvLight",n.allowEnv),n.color&&f.setAttribute("Color",n.color)),m.appendChild(f)}),a.lightables.filter(n=>n.type==="misc").forEach(n=>{let l=`${n.id}`;l=l.replace(/(^[^\d\n]*\d[^\d\n]*$)/gm,"0$1").toUpperCase();const f=r.createElement(`Misc${l}`);n.allowEnv&&(f.setAttribute("AllowEnvLight",n.allowEnv),n.color&&f.setAttribute("Color",n.color)),m.appendChild(f)}),b.appendChild(m);const c=r.createElement("STATIC");a.statics.forEach(n=>{let l="";n.type==="extra"?l=`Extra${n.id}`:n.type==="misc"&&(l=`Misc${String(n.id).toUpperCase()}`);const f=r.createElement(l);f.setAttribute("Name",n.name??l),c.appendChild(f)}),b.appendChild(c);const w=r.createElement("SOUNDS");a.sounds.forEach(n=>{const l=r.createElement(n.name);l.setAttribute("AllowUse",n.allowUse),n.allowUse&&n.audioString&&l.setAttribute("AudioString",n.audioString),n.allowUse&&a.useServerSirens&&n.soundSet&&l.setAttribute("SoundSet",n.soundSet),w.appendChild(l)}),b.appendChild(w);const S=r.createElement("PATTERN");return a.patterns.forEach(n=>{const l=r.createElement(n.name);l.setAttribute("IsEmergency",n.isEmergency),l.setAttribute("FlashHighBeam",n.flashHighBeam),l.setAttribute("EnableWarningBeep",n.enableWarningBeep),a.flashes.filter(u=>u.pattern===n.name).forEach(u=>{const o=r.createElement("Flash");u.duration&&o.setAttribute("Duration",u.duration),u.extras.length&&o.setAttribute("Extras",[...u.extras].sort().join(",")),u.miscs.length&&o.setAttribute("Miscs",[...u.miscs].sort().join(",")),l.appendChild(o)}),S.appendChild(l)}),b.appendChild(S),r},On=a=>{var o,t;const s={flashID:1,configuration:{author:null,description:null,version:null,lightables:[],statics:[],useServerSirens:!1,sounds:[],patterns:[],flashes:[]}},r=new DOMParser().parseFromString(a,"text/xml");s.configuration.description=r.querySelector("vcfroot").getAttribute("Description")??null,s.configuration.author=r.querySelector("vcfroot").getAttribute("Author"),s.configuration.version=r.querySelector("vcfroot").getAttribute("Version")??null;const d=r.querySelector("EOVERRIDE"),b=Array.from(d.querySelectorAll("*")),m=b.filter(i=>i.nodeName.startsWith("Extra")),c=b.filter(i=>i.nodeName.startsWith("Misc"));m.forEach(i=>{s.configuration.lightables.push({id:parseInt(i.nodeName.match(/([0-9]|[1-9][0-9])$/g)[0]),type:"extra",enabled:!0,allowEnv:i.getAttribute("AllowEnvLight")==="true",color:i.getAttribute("Color")??null})}),c.forEach(i=>{s.configuration.lightables.push({id:i.nodeName.match(/([A-Z])$/g)[0].toLowerCase(),type:"misc",enabled:!0,allowEnv:i.getAttribute("AllowEnvLight")==="true",color:i.getAttribute("Color")??null})});const w=r.querySelector("STATIC"),S=Array.from(w.querySelectorAll("*")),h=S.filter(i=>i.nodeName.startsWith("Extra")),n=S.filter(i=>i.nodeName.startsWith("Misc"));h.forEach(i=>{s.configuration.statics.push({id:parseInt(i.nodeName.match(/([0-9]|[1-9][0-9])$/g)[0]),type:"extra",name:i.getAttribute("Name")??i.nodeName})}),n.forEach(i=>{s.configuration.statics.push({id:i.nodeName.match(/([A-Z])$/g)[0].toLowerCase(),type:"misc",name:i.getAttribute("Name")??i.nodeName})});const l=r.querySelector("SOUNDS"),f=l==null?void 0:l.querySelectorAll("*");f==null||f.forEach(i=>{const _=i.nodeName==="NineMode";let E={name:i.nodeName,allowUse:i.getAttribute("AllowUse")==="true"};_||(E.audioString=i.getAttribute("AudioString"),E.soundSet=i.getAttribute("SoundSet")),s.configuration.sounds.push(E)}),f==null||f.forEach(i=>{i.getAttribute("SoundSet")!==null&&(s.configuration.useServerSirens=!0)});const u=r.querySelector("PATTERN");for(const i of u.children){s.configuration.patterns.push({name:i.nodeName,isEmergency:i.getAttribute("IsEmergency")==="true",flashHighBeam:i.getAttribute("FlashHighBeam")==="true",enableWarningBeep:i.getAttribute("EnableWarningBeep")==="true",loopPreview:!0,isPlayingPreview:!1});for(const _ of i.children){const E=((o=_.getAttribute("Extras"))==null?void 0:o.split(","))??[],p=((t=_.getAttribute("Miscs"))==null?void 0:t.split(","))??[];s.configuration.flashes.push({id:s.flashID++,duration:parseInt(_.getAttribute("Duration")||"")??100,extras:E.map(x=>parseInt(x))??[],miscs:p??[],pattern:i.nodeName})}}return s};var pe={exports:{}};(function(a,s){(function(r,d){d()})(R,function(){function r(h,n){return typeof n>"u"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function d(h,n,l){var f=new XMLHttpRequest;f.open("GET",h),f.responseType="blob",f.onload=function(){S(f.response,n,l)},f.onerror=function(){console.error("could not download file")},f.send()}function b(h){var n=new XMLHttpRequest;n.open("HEAD",h,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function m(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(n)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof R=="object"&&R.global===R?R:void 0,w=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),S=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!w?function(h,n,l){var f=c.URL||c.webkitURL,u=document.createElement("a");n=n||h.name||"download",u.download=n,u.rel="noopener",typeof h=="string"?(u.href=h,u.origin===location.origin?m(u):b(u.href)?d(h,n,l):m(u,u.target="_blank")):(u.href=f.createObjectURL(h),setTimeout(function(){f.revokeObjectURL(u.href)},4e4),setTimeout(function(){m(u)},0))}:"msSaveOrOpenBlob"in navigator?function(h,n,l){if(n=n||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(r(h,l),n);else if(b(h))d(h,n,l);else{var f=document.createElement("a");f.href=h,f.target="_blank",setTimeout(function(){m(f)})}}:function(h,n,l,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof h=="string")return d(h,n,l);var u=h.type==="application/octet-stream",o=/constructor/i.test(c.HTMLElement)||c.safari,t=/CriOS\/[\d]+/.test(navigator.userAgent);if((t||u&&o||w)&&typeof FileReader<"u"){var i=new FileReader;i.onloadend=function(){var p=i.result;p=t?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=p:location=p,f=null},i.readAsDataURL(h)}else{var _=c.URL||c.webkitURL,E=_.createObjectURL(h);f?f.location=E:location.href=E,f=null,setTimeout(function(){_.revokeObjectURL(E)},4e4)}});c.saveAs=S.saveAs=S,a.exports=S})})(pe);var Rn=pe.exports,Q={exports:{}},ee={exports:{}};(function(a,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ParsingError=void 0;class r extends Error{constructor(x,C){super(x),this.cause=C}}s.ParsingError=r;let d;function b(){return S(!1)||f()||l()||n()}function m(){return t(/\s*/),S(!0)||l()||h()||w(!1)}function c(){const p=w(!0),x=[];let C,V=m();for(;V;){if(V.node.type==="Element"){if(C)throw new Error("Found multiple root nodes");C=V.node}V.excluded||x.push(V.node),V=m()}if(!C)throw new r("Failed to parse XML","Root Element not found");if(d.xml.length!==0)throw new r("Failed to parse XML","Not Well-Formed XML");return{declaration:p?p.node:null,root:C,children:x}}function w(p){const x=t(p?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!x)return;const C={name:x[1],type:"ProcessingInstruction",attributes:{}};for(;!(i()||_("?>"));){const V=u();if(V)C.attributes[V.name]=V.value;else return}return t(/\?>/),{excluded:p?!1:d.options.filter(C)===!1,node:C}}function S(p){const x=t(/^<([^?!</>\s]+)\s*/);if(!x)return;const C={type:"Element",name:x[1],attributes:{},children:[]},V=p?!1:d.options.filter(C)===!1;for(;!(i()||_(">")||_("?>")||_("/>"));){const F=u();if(F)C.attributes[F.name]=F.value;else return}if(t(/^\s*\/>/))return C.children=null,{excluded:V,node:C};t(/\??>/);let U=b();for(;U;)U.excluded||C.children.push(U.node),U=b();if(d.options.strictMode){const F=`</${C.name}>`;if(d.xml.startsWith(F))d.xml=d.xml.slice(F.length);else throw new r("Failed to parse XML",`Closing tag not matching "${F}"`)}else t(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:V,node:C}}function h(){const p=t(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||t(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||t(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||t(/^<!DOCTYPE\s+\S+\s*>/);if(p){const x={type:"DocumentType",content:p[0]};return{excluded:d.options.filter(x)===!1,node:x}}}function n(){if(d.xml.startsWith("<![CDATA[")){const p=d.xml.indexOf("]]>");if(p>-1){const x=p+3,C={type:"CDATA",content:d.xml.substring(0,x)};return d.xml=d.xml.slice(x),{excluded:d.options.filter(C)===!1,node:C}}}}function l(){const p=t(/^<!--[\s\S]*?-->/);if(p){const x={type:"Comment",content:p[0]};return{excluded:d.options.filter(x)===!1,node:x}}}function f(){const p=t(/^([^<]+)/);if(p){const x={type:"Text",content:p[1]};return{excluded:d.options.filter(x)===!1,node:x}}}function u(){const p=t(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(p)return{name:p[1].trim(),value:o(p[2].trim())}}function o(p){return p.replace(/^['"]|['"]$/g,"")}function t(p){const x=d.xml.match(p);if(x)return d.xml=d.xml.slice(x[0].length),x}function i(){return d.xml.length===0}function _(p){return d.xml.indexOf(p)===0}function E(p,x={}){p=p.trim();const C=x.filter||(()=>!0);return d={xml:p,options:Object.assign(Object.assign({},x),{filter:C,strictMode:x.strictMode===!0})},c()}a.exports=E,s.default=E})(ee,ee.exports);var Dn=ee.exports;(function(a,s){var r=R&&R.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(s,"__esModule",{value:!0});const d=r(Dn);function b(o){if(!o.options.indentation&&!o.options.lineSeparator)return;o.content+=o.options.lineSeparator;let t;for(t=0;t<o.level;t++)o.content+=o.options.indentation}function m(o){o.content=o.content.replace(/ +$/,"");let t;for(t=0;t<o.level;t++)o.content+=o.options.indentation}function c(o,t){o.content+=t}function w(o,t,i){if(typeof o.content=="string")S(o.content,t,i);else if(o.type==="Element")n(o,t,i);else if(o.type==="ProcessingInstruction")f(o,t);else throw new Error("Unknown node type: "+o.type)}function S(o,t,i){if(!i){const _=o.trim();(t.options.lineSeparator||_.length===0)&&(o=_)}o.length>0&&(!i&&t.content.length>0&&b(t),c(t,o))}function h(o,t){const i="/"+o.join("/"),_=o[o.length-1];return t.includes(_)||t.includes(i)}function n(o,t,i){if(t.path.push(o.name),!i&&t.content.length>0&&b(t),c(t,"<"+o.name),l(t,o.attributes),o.children===null||t.options.forceSelfClosingEmptyTag&&o.children.length===0){const _=t.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";c(t,_)}else if(o.children.length===0)c(t,"></"+o.name+">");else{const _=o.children;c(t,">"),t.level++;let E=o.attributes["xml:space"]==="preserve",p=!1;if(!E&&t.options.ignoredPaths&&(p=h(t.path,t.options.ignoredPaths),E=p),!E&&t.options.collapseContent){let x=!1,C=!1,V=!1;_.forEach(function(U,F){U.type==="Text"?(U.content.includes(`
`)?(C=!0,U.content=U.content.trim()):(F===0||F===_.length-1)&&!i&&U.content.trim().length===0&&(U.content=""),U.content.trim().length>0&&(x=!0)):U.type==="CDATA"?x=!0:V=!0}),x&&(!V||!C)&&(E=!0)}_.forEach(function(x){w(x,t,i||E)}),t.level--,!i&&!E&&b(t),p&&m(t),c(t,"</"+o.name+">")}t.path.pop()}function l(o,t){Object.keys(t).forEach(function(i){const _=t[i].replace(/"/g,"&quot;");c(o," "+i+'="'+_+'"')})}function f(o,t){t.content.length>0&&b(t),c(t,"<?"+o.name),l(t,o.attributes),c(t,"?>")}function u(o,t={}){t.indentation="indentation"in t?t.indentation:"    ",t.collapseContent=t.collapseContent===!0,t.lineSeparator="lineSeparator"in t?t.lineSeparator:`\r
`,t.whiteSpaceAtEndOfSelfclosingTag=t.whiteSpaceAtEndOfSelfclosingTag===!0,t.throwOnFailure=t.throwOnFailure!==!1;try{const i=(0,d.default)(o,{filter:t.filter,strictMode:t.strictMode}),_={content:"",level:0,options:t,path:[]};return i.declaration&&f(i.declaration,_),i.children.forEach(function(E){w(E,_,!1)}),t.lineSeparator?_.content.replace(/\r\n/g,`
`).replace(/\n/g,t.lineSeparator):_.content}catch(i){if(t.throwOnFailure)throw i;return o}}u.minify=(o,t={})=>u(o,Object.assign(Object.assign({},t),{indentation:"",lineSeparator:""})),a.exports=u,s.default=u})(Q,Q.exports);var Pn=Q.exports;const Bn=be(Pn),Hn=X({components:{InboxArrowDownIcon:Oe,XMarkIcon:Y,InboxIcon:Re},props:{state:{type:String,required:!0},isForNotice:{type:Boolean,default:!1}},emits:["click"]}),jn={key:1,class:"relative"},zn={key:2,class:"ml-2"};function Wn(a,s,r,d,b,m){const c=G("InboxArrowDownIcon"),w=G("InboxIcon"),S=G("XMarkIcon");return g(),v("button",{onClick:s[0]||(s[0]=h=>a.$emit("click")),class:P(["blue flex items-center",a.isForNotice?"!text-white p-2":"outlined p-3"])},[a.state==="1"?(g(),Z(c,{key:0,class:"w-4 h-4"})):(g(),v("div",jn,[L(w,{class:"w-4 h-4"}),L(S,{class:"w-4 h-4 absolute top-0 left-0"})])),a.isForNotice?(g(),v("span",zn,M(a.state==="1"?"Disable":"Enable")+" local VCF storage",1)):O("",!0)],2)}const re=he(Hn,[["render",Wn]]),qn=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,ce=a=>{if(typeof a!="string")throw new TypeError("Invalid argument expected string");const s=a.match(qn);if(!s)throw new Error(`Invalid argument not valid semver ('${a}' received)`);return s.shift(),s},ue=a=>a==="*"||a==="x"||a==="X",de=a=>{const s=parseInt(a,10);return isNaN(s)?a:s},Xn=(a,s)=>typeof a!=typeof s?[String(a),String(s)]:[a,s],Yn=(a,s)=>{if(ue(a)||ue(s))return 0;const[r,d]=Xn(de(a),de(s));return r>d?1:r<d?-1:0},fe=(a,s)=>{for(let r=0;r<Math.max(a.length,s.length);r++){const d=Yn(a[r]||"0",s[r]||"0");if(d!==0)return d}return 0},Gn=(a,s)=>{const r=ce(a),d=ce(s),b=r.pop(),m=d.pop(),c=fe(r,d);return c!==0?c:b&&m?fe(b.split("."),m.split(".")):b||m?b?-1:1:0},Kn={class:"flex justify-between items-center my-4"},Jn=e("h1",{class:"text-2xl font-bold"},"MISS ELS VCF Configurator",-1),Zn={class:"flex gap-4"},Qn={key:0,class:"py-4"},eo={class:"rounded-md bg-yellow-50 p-4"},to={class:"flex"},no=e("h3",{class:"text-sm font-medium text-yellow-800"}," Attention! From now on, we are storing data in the browser's memory. ",-1),oo=e("div",{class:"mt-2 text-sm"},[e("p",{class:"!text-yellow-700 font-normal"},[$(" To prevent data loss, we store your current VCF in your local browser data. "),e("br"),$(" When you revisit the configurator, the last VCF file you modified will be loaded again. "),e("br"),$(" Do you not want this? Or do you want to start with an empty VCF? Then you can disable local storage. "),e("br"),$(" This can be done via the button below or the button at the top right. "),e("br"),$(" Resetting can be done via the button below or at the very bottom of the page. ")])],-1),so={class:"mt-4"},lo={class:"-mx-2 -my-1.5 flex gap-4"},io={class:"ml-auto pl-3"},ao={class:"-mx-1.5 -my-1.5"},ro=e("span",{class:"sr-only"},"Dismiss",-1),co=["onSubmit"],uo={class:"md:flex md:items-center mb-3"},fo=e("label",{for:"description"},"Description",-1),ho={class:"md:flex md:items-center mb-3"},mo=e("label",{for:"author"},"Author",-1),po={class:"md:flex md:items-center mb-3"},go=e("label",{for:"version"},"VCF schema version",-1),_o={key:0,class:"border-l-4 border-yellow-400 bg-yellow-50 p-4"},vo={class:"flex"},bo=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])],-1),yo={class:"ml-3"},wo={class:"text-sm !text-yellow-700"},So=e("br",null,null,-1),xo=e("br",null,null,-1),Eo={class:"font-medium"},Co={class:"font-medium"},$o={class:"py-3 flex gap-4"},Io=e("button",{class:"blue py-2 px-4",type:"submit"},"Generate VCF",-1),Ao=["onClick"],No={__name:"configurator",setup(a){const s=we(),r=te();xe({title:"MISS-ELS VCF Configurator"}),Se({ogSiteName:"MISS-ELS",title:"MISS-ELS VCF Configurator",ogTitle:"MISS-ELS VCF Configurator",ogDescription:"Using our VCF Configurator, you can easily generate configuration files for your vehicles.",ogImage:`${s.origin+r.app.baseURL}images/MISS-ELS.png`});const d=T(()=>Gn(l.value.configuration.version??"0.0.0",r.public.version)>=0),b=()=>{window.confirm("Are you sure you want to reset? All changes to the VCF will be lost.")&&Ae()},m=j(localStorage.getItem("theme")??"light"),c=()=>{var o,t;(o=document.getElementsByTagName("html")[0])==null||o.classList.remove(m.value),m.value=m.value==="light"?"dark":"light",(t=document.getElementsByTagName("html")[0])==null||t.classList.add(m.value)};le(()=>{var o;m.value||(m.value="light"),(o=document.getElementsByTagName("html")[0])==null||o.classList.add(m.value)}),z(()=>m.value,o=>{localStorage.setItem("theme",o)});const w=j(localStorage.getItem("saveVcfLocal")??"1"),S=()=>{w.value=w.value==="1"?"0":"1",w.value==="0"&&(localStorage.removeItem("vcfConfiguration"),localStorage.removeItem("vcfUpdated"))};le(()=>{w.value||(w.value="1")}),z(()=>w.value,o=>{localStorage.setItem("saveVcfLocal",o)});const h=j(!!Number(localStorage.getItem("hasReadLocalStorageNotice"))),n=()=>{window.confirm("Are you sure you want to dismiss this message? You will never see it again.")&&(h.value=!0,localStorage.setItem("hasReadLocalStorageNotice","1"))},l=I(),f=j(""),u=()=>{const o=Tn(l.value.configuration);let t=new XMLSerializer().serializeToString(o);t='<?xml version="1.0" encoding="utf-8" ?>'+t;const i=Bn(t,{whiteSpaceAtEndOfSelfclosingTag:!0}),_=new Blob([i],{type:"application/xml"}),E=l.value.description??"myVCF.xml";Rn.saveAs(_,E)};return z(f,(o,t)=>{if(o!==t){const i=On(o);Ue(i)}}),(o,t)=>{const i=Ee,_=pt,E=Ft,p=tn,x=Fn;return g(),v(k,null,[e("div",Kn,[Jn,e("div",Zn,[L(i,{onLoad:t[0]||(t[0]=C=>f.value=C)}),e("button",{onClick:c,class:"blue outlined p-3 !text-yellow-400"},[y(m)==="dark"?(g(),Z(y(He),{key:0,class:"w-4 h-4"})):(g(),Z(y(De),{key:1,class:"w-4 h-4"}))]),L(re,{state:y(w),onClick:S},null,8,["state"])])]),y(h)?O("",!0):(g(),v("div",Qn,[e("div",eo,[e("div",to,[e("div",null,[no,oo,e("div",so,[e("div",lo,[L(re,{state:y(w),onClick:S,isForNotice:!0},null,8,["state"]),e("button",{onClick:b,class:"amber p-2"}," Reset VCF ")])])]),e("div",io,[e("div",ao,[e("button",{type:"button",class:"amber p-1.5",onClick:n},[ro,L(y(Y),{class:"w-6 h-6"})])])])])])])),e("form",{onSubmit:ie(u,["prevent"])},[e("div",null,[e("div",uo,[fo,A(e("input",{id:"description","onUpdate:modelValue":t[1]||(t[1]=C=>y(l).configuration.description=C),type:"text"},null,512),[[B,y(l).configuration.description]])]),e("div",ho,[mo,A(e("input",{id:"author","onUpdate:modelValue":t[2]||(t[2]=C=>y(l).configuration.author=C),type:"text"},null,512),[[B,y(l).configuration.author]])]),e("div",po,[go,e("p",null,M(y(l).configuration.version??"Unknown"),1)]),y(d)?O("",!0):(g(),v("div",_o,[e("div",vo,[bo,e("div",yo,[e("p",wo,[$(" Please be aware! The VCF you have imported was generated with an older version of the configurator. "),So,$(" This means that some settings may not be available in the configurator, or have been enabled, disabled or changed by default. "),xo,$(" Your VCF schema version is "),e("span",Eo,M(y(l).configuration.version??"Unknown"),1),$(" , the latest version is "),e("span",Co,M(y(r).public.version),1),$(" . ")])])])]))]),L(_,{class:"card"}),L(E,{class:"card"}),L(p,{class:"card"}),L(x,{class:"card"}),e("div",$o,[Io,e("button",{class:"amber py-2 px-4",type:"button",onClick:ie(b,["prevent"])}," Reset VCF ",8,Ao)])],40,co)],64)}}};export{No as default};
